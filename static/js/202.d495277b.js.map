{"version":3,"file":"static/js/202.d495277b.js","sources":["webpack://rustwebui-frontend/./src/utils/event-bus.js"],"sourcesContent":["/**\n * Frontend Event Bus System\n * Provides publish/subscribe functionality for the React frontend\n * Integrates with WebUI for backend communication\n */\n\nclass EventBus {\n  constructor() {\n    this.listeners = new Map(); // Map of event names to array of callbacks\n    this.middleware = []; // Middleware functions to process events\n    this.history = []; // Store event history\n    this.maxHistorySize = 100; // Maximum number of events to keep in history\n    this.backendListeners = new Map(); // Track backend event listeners\n    this.webuiAvailable = typeof window.webui !== 'undefined';\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} eventName - Name of the event to subscribe to\n   * @param {Function} callback - Function to call when event is emitted\n   * @param {Object} options - Subscription options\n   * @returns {Function} Unsubscribe function\n   */\n  subscribe(eventName, callback, options = {}) {\n    if (!this.listeners.has(eventName)) {\n      this.listeners.set(eventName, []);\n    }\n\n    const subscription = {\n      callback,\n      id: this.generateId(),\n      once: options.once || false,\n      filter: options.filter || null,\n      priority: options.priority || 0, // Higher priority executes first\n      context: options.context || null\n    };\n\n    this.listeners.get(eventName).push(subscription);\n    \n    // Sort by priority (higher first)\n    this.sortListenersByPriority(eventName);\n    \n    console.debug(`Subscribed to event: ${eventName}`, { subscriptionId: subscription.id });\n\n    // Return unsubscribe function\n    return () => {\n      this.unsubscribe(eventName, subscription.id);\n    };\n  }\n\n  /**\n   * Subscribe to an event only once\n   * @param {string} eventName - Name of the event to subscribe to\n   * @param {Function} callback - Function to call when event is emitted\n   * @returns {Function} Unsubscribe function\n   */\n  subscribeOnce(eventName, callback, options = {}) {\n    return this.subscribe(eventName, callback, { ...options, once: true });\n  }\n\n  /**\n   * Unsubscribe from an event\n   * @param {string} eventName - Name of the event\n   * @param {string} subscriptionId - ID of the subscription to remove\n   */\n  unsubscribe(eventName, subscriptionId) {\n    if (this.listeners.has(eventName)) {\n      const listeners = this.listeners.get(eventName);\n      const index = listeners.findIndex(sub => sub.id === subscriptionId);\n      if (index !== -1) {\n        listeners.splice(index, 1);\n        console.debug(`Unsubscribed from event: ${eventName}`, { subscriptionId });\n      }\n    }\n  }\n\n  /**\n   * Emit an event\n   * @param {string|Object} eventOrName - Either event name string or event object\n   * @param {*} data - Data to pass with the event (if eventOrName is string)\n   * @param {Object} metadata - Additional metadata for the event\n   */\n  async emit(eventOrName, data = null, metadata = {}) {\n    let event;\n    \n    if (typeof eventOrName === 'string') {\n      // Create event object from name and data\n      event = {\n        id: this.generateId(),\n        name: eventOrName,\n        data,\n        timestamp: Date.now(),\n        source: 'frontend',\n        metadata: { ...metadata, source: 'frontend' }\n      };\n    } else {\n      // Assume it's already an event object\n      event = {\n        id: this.generateId(),\n        timestamp: Date.now(),\n        source: 'frontend',\n        ...eventOrName,\n        metadata: { ...eventOrName.metadata, source: 'frontend' }\n      };\n    }\n\n    console.debug(`Emitting event: ${event.name}`, { eventId: event.id, data: event.data });\n\n    // Add to history\n    this.addToHistory(event);\n\n    // Apply middleware\n    for (const middleware of this.middleware) {\n      try {\n        const result = await Promise.resolve(middleware(event));\n        if (result === false) {\n          console.debug(`Middleware cancelled event: ${event.name}`);\n          return; // Cancel event emission\n        }\n      } catch (error) {\n        console.error('Error in event middleware:', error);\n      }\n    }\n\n    // Get listeners for this event\n    const listeners = this.listeners.get(event.name) || [];\n\n    // Process listeners\n    const remainingListeners = [];\n    for (const subscription of listeners) {\n      try {\n        // Apply filter if present\n        if (subscription.filter && !subscription.filter(event)) {\n          remainingListeners.push(subscription);\n          continue;\n        }\n\n        // Call the callback with proper context\n        const context = subscription.context || this;\n        const result = await Promise.resolve(\n          subscription.callback.call(context, event)\n        );\n\n        // If it's a once subscription, don't keep it\n        if (!subscription.once) {\n          remainingListeners.push(subscription);\n        }\n\n        // If callback returns false, stop propagation\n        if (result === false) {\n          console.debug(`Event propagation stopped by listener: ${event.name}`);\n          break;\n        }\n      } catch (error) {\n        console.error(`Error in event listener for ${event.name}:`, error);\n      }\n    }\n\n    // Update listeners (remove once subscriptions)\n    if (remainingListeners.length !== listeners.length) {\n      this.listeners.set(event.name, remainingListeners);\n    }\n\n    // Also emit as DOM custom event for compatibility with existing code\n    this.emitAsDOMEvent(event);\n  }\n\n  /**\n   * Emit event as DOM custom event for compatibility\n   * @param {Object} event - The event object\n   */\n  emitAsDOMEvent(event) {\n    const domEvent = new CustomEvent(event.name, {\n      detail: {\n        id: event.id,\n        name: event.name,\n        data: event.data,\n        timestamp: event.timestamp,\n        source: event.source,\n        metadata: event.metadata\n      }\n    });\n    \n    window.dispatchEvent(domEvent);\n  }\n\n  /**\n   * Add middleware function to process events\n   * @param {Function} middleware - Middleware function\n   * @returns {Function} Function to remove middleware\n   */\n  use(middleware) {\n    this.middleware.push(middleware);\n    \n    return () => {\n      const index = this.middleware.indexOf(middleware);\n      if (index !== -1) {\n        this.middleware.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Add event to history\n   * @param {Object} event - The event to add\n   */\n  addToHistory(event) {\n    this.history.push(event);\n    if (this.history.length > this.maxHistorySize) {\n      this.history.shift();\n    }\n  }\n\n  /**\n   * Get event history\n   * @param {string} eventName - Optional event name to filter by\n   * @returns {Array} Array of events\n   */\n  getHistory(eventName = null) {\n    if (eventName) {\n      return this.history.filter(event => event.name === eventName);\n    }\n    return [...this.history];\n  }\n\n  /**\n   * Clear event history\n   */\n  clearHistory() {\n    this.history = [];\n  }\n\n  /**\n   * Get all event names that have listeners\n   * @returns {Array} Array of event names\n   */\n  getEventNames() {\n    return Array.from(this.listeners.keys());\n  }\n\n  /**\n   * Get count of listeners for an event\n   * @param {string} eventName - Name of the event\n   * @returns {number} Count of listeners\n   */\n  getListenerCount(eventName) {\n    return this.listeners.has(eventName) \n      ? this.listeners.get(eventName).length \n      : 0;\n  }\n\n  /**\n   * Generate unique ID\n   * @returns {string} Unique ID\n   */\n  generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);\n  }\n\n  /**\n   * Sort listeners by priority (higher first)\n   * @param {string} eventName - Name of the event\n   */\n  sortListenersByPriority(eventName) {\n    if (this.listeners.has(eventName)) {\n      this.listeners.get(eventName).sort((a, b) => b.priority - a.priority);\n    }\n  }\n\n  /**\n   * Wait for an event to be emitted\n   * @param {string} eventName - Name of the event to wait for\n   * @param {number} timeout - Timeout in milliseconds (optional)\n   * @returns {Promise} Promise that resolves with event data\n   */\n  waitFor(eventName, timeout = null) {\n    return new Promise((resolve, reject) => {\n      const unsubscribe = this.subscribeOnce(eventName, (event) => {\n        resolve(event);\n      });\n\n      if (timeout) {\n        setTimeout(() => {\n          unsubscribe();\n          reject(new Error(`Timeout waiting for event: ${eventName}`));\n        }, timeout);\n      }\n    });\n  }\n\n  /**\n   * Forward events to backend via WebUI\n   * @param {string} eventName - Name of the event\n   * @param {*} data - Data to send to backend\n   */\n  forwardToBackend(eventName, data) {\n    // Check if WebUI is available and send event to backend\n    if (this.webuiAvailable && typeof window.webui !== 'undefined') {\n      try {\n        // Create a JSON payload for the event\n        const payload = JSON.stringify({\n          event: eventName,\n          data: data,\n          timestamp: Date.now(),\n          source: 'frontend'\n        });\n        \n        // Send to backend via WebUI\n        window.webui.run(`handleFrontendEvent('${payload}')`);\n        console.log(`Forwarded event to backend: ${eventName}`, { data });\n      } catch (error) {\n        console.error(`Error forwarding event to backend: ${eventName}`, error);\n      }\n    } else {\n      console.warn(`WebUI not available, cannot forward event: ${eventName}`);\n    }\n  }\n\n  /**\n   * Listen for events from backend\n   * @param {string} eventName - Name of the event to listen for from backend\n   * @param {Function} callback - Callback to handle the event\n   * @returns {Function} Unsubscribe function\n   */\n  listenFromBackend(eventName, callback) {\n    // Create a unique handler function\n    const handler = (event) => {\n      // Extract the detail from the custom event\n      const eventData = event.detail || event;\n      callback(eventData);\n    };\n\n    // Store the handler to allow for proper cleanup\n    const listenerId = this.generateId();\n    this.backendListeners.set(listenerId, { eventName, handler });\n\n    // Add event listener to window\n    window.addEventListener(eventName, handler);\n    \n    // Return unsubscribe function\n    return () => {\n      window.removeEventListener(eventName, handler);\n      this.backendListeners.delete(listenerId);\n    };\n  }\n\n  /**\n   * Initialize WebUI event handlers\n   * Sets up communication channel with backend\n   */\n  initWebUIHandlers() {\n    if (!this.webuiAvailable) {\n      console.warn('WebUI not available, skipping WebUI handlers initialization');\n      return;\n    }\n\n    // Define a global function that can be called from backend\n    window.handleBackendEvent = (eventJson) => {\n      try {\n        const event = JSON.parse(eventJson);\n        console.log('Received event from backend:', event);\n        \n        // Emit the event through our event bus\n        this.emit(event.event || 'backend.event', event.data, {\n          source: 'backend',\n          originalEvent: event\n        });\n      } catch (error) {\n        console.error('Error handling backend event:', error);\n      }\n    };\n\n    console.log('WebUI event handlers initialized');\n  }\n\n  /**\n   * Send event to backend with promise-based response\n   * @param {string} eventName - Name of the event to send\n   * @param {*} data - Data to send to backend\n   * @param {number} timeout - Timeout in milliseconds\n   * @returns {Promise} Promise that resolves with backend response\n   */\n  async sendToBackendWithResponse(eventName, data, timeout = 5000) {\n    return new Promise((resolve, reject) => {\n      // Create a unique response event name\n      const responseEventName = `${eventName}.response`;\n      let timeoutId;\n\n      // Set up response listener\n      const responseHandler = (event) => {\n        clearTimeout(timeoutId);\n        // Clean up the response listener\n        window.removeEventListener(responseEventName, responseHandler);\n        resolve(event.detail || event);\n      };\n\n      // Listen for the response\n      window.addEventListener(responseEventName, responseHandler);\n\n      // Set timeout\n      timeoutId = setTimeout(() => {\n        window.removeEventListener(responseEventName, responseHandler);\n        reject(new Error(`Timeout waiting for response to ${eventName}`));\n      }, timeout);\n\n      // Send the event to backend\n      this.forwardToBackend(eventName, data);\n    });\n  }\n}\n\n// Create global event bus instance\nconst globalEventBus = new EventBus();\n\n// Add some useful middleware\nglobalEventBus.use((event) => {\n  // Log all events\n  console.log(`[EVENT BUS] Event emitted: ${event.name}`, {\n    id: event.id,\n    timestamp: new Date(event.timestamp).toISOString(),\n    data: event.data,\n    metadata: event.metadata\n  });\n});\n\n// Initialize WebUI handlers if available\nglobalEventBus.initWebUIHandlers();\n\n// Export the event bus\nexport default globalEventBus;\n\n// Also export as individual functions for convenience\nexport const { \n  subscribe, \n  subscribeOnce, \n  unsubscribe, \n  emit, \n  use, \n  getHistory, \n  clearHistory, \n  getEventNames, \n  getListenerCount, \n  waitFor,\n  forwardToBackend,\n  listenFromBackend,\n  sendToBackendWithResponse\n} = globalEventBus;\n\n// Export types/constants if needed\nexport const EVENT_TYPES = {\n  COUNTER_INCREMENT: 'counter.increment',\n  COUNTER_RESET: 'counter.reset',\n  COUNTER_VALUE_CHANGED: 'counter.value_changed',\n  DATABASE_CONNECTED: 'database.connected',\n  DATABASE_DISCONNECTED: 'database.disconnected',\n  USERS_FETCHED: 'database.users_fetched',\n  USER_ADDED: 'database.user_added',\n  USER_UPDATED: 'database.user_updated',\n  USER_DELETED: 'database.user_deleted',\n  SYSTEM_INFO_REQUESTED: 'system.info_requested',\n  SYSTEM_INFO_RECEIVED: 'system.info_received',\n  WEBUI_CONNECTED: 'webui.connected',\n  WEBUI_READY: 'webui.ready',\n  WEBUI_DISCONNECTED: 'webui.disconnected',\n  CUSTOM: 'custom'\n};\n\n// Export event bus instance for direct access\nexport { globalEventBus };"],"names":["Map","window","e","console","Date","Promise","r","CustomEvent","Array","Math","t","setTimeout","Error","JSON","clearTimeout","s","c"],"mappings":"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"}